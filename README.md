# Go API client for openapi

## Overview

This API client was generated by the [OpenAPI Generator](https://openapi-generator.tech) project.  By using the [OpenAPI-spec](https://www.openapis.org/) from a remote server, you can easily generate an API client.

- API version: 1.0.0
- Package version: 1.0.0
- Build package: org.openapitools.codegen.languages.GoClientCodegen
For more information, please visit [http://contabo.com](http://contabo.com)

## Build locally

```sh
OPENAPIURL=https://api-staging-ext.contabo.intra/cloud-features/contabo-api.yaml make release
```

### Running things locally

```sh
# for values please lookup gitlab ci/cd or leave them empty to fall back to default values for dev
export OAUTH2_URL=https://idm-staging-ext.contabo.intra/auth/realms/contabo/protocol/openid-connect/token
#export OAUTH2_CLIENT_ID
export OAUTH2_CLIENT_SECRET="xxxxx"
#export OAUTH2_USER
export OAUTH2_PASS="xxxxx"
export API_ENDPOINT=https://api-staging-ext.contabo.intra
export OAUTH2_USER_ID=e8256b41-478d-4c1b-ab74-99ac866927db
export IDM_PASSWORD="xxxx"
export IDM_BASE_URL=https://idm-staging-int.contabo.intra
export PG_CLUSTER=staging-postgres

# for mac os
# PATH="$(brew --prefix)/opt/gnu-sed/libexec/gnubin:$PATH"
```

### Run bats tests

```sh
rm -f ~/.cache/cntb/token && bats -rt --timing  bats/*.bats
```

### Remove test data from datbase after crash of tests

```sh
bats/cleanup-data.sh
```

## Installation

Install the following dependencies:

```shell
go get github.com/stretchr/testify/assert
go get golang.org/x/oauth2
go get golang.org/x/net/context
```

Put the package under your project folder and add the following in import:

```golang
import sw "./openapi"
```

To use a proxy, set the environment variable `HTTP_PROXY`:

```golang
os.Setenv("HTTP_PROXY", "http://proxy_name:proxy_port")
```

## Configuration of Server URL

Default configuration comes with `Servers` field that contains server objects as defined in the OpenAPI specification.

### Select Server Configuration

For using other server than the one defined on index 0 set context value `sw.ContextServerIndex` of type `int`.

```golang
ctx := context.WithValue(context.Background(), sw.ContextServerIndex, 1)
```

### Templated Server URL

Templated server URL is formatted using default variables from configuration or from context value `sw.ContextServerVariables` of type `map[string]string`.

```golang
ctx := context.WithValue(context.Background(), sw.ContextServerVariables, map[string]string{
	"basePath": "v2",
})
```

Note, enum values are always validated and all unused variables are silently ignored.

### URLs Configuration per Operation

Each operation can use different server URL defined using `OperationServers` map in the `Configuration`.
An operation is uniquely identifield by `"{classname}Service.{nickname}"` string.
Similar rules for overriding default operation server index and variables applies by using `sw.ContextOperationServerIndices` and `sw.ContextOperationServerVariables` context maps.

```
ctx := context.WithValue(context.Background(), sw.ContextOperationServerIndices, map[string]int{
	"{classname}Service.{nickname}": 2,
})
ctx = context.WithValue(context.Background(), sw.ContextOperationServerVariables, map[string]map[string]string{
	"{classname}Service.{nickname}": {
		"port": "8443",
	},
})
```

## Documentation for API Endpoints

All URIs are relative to *http://localhost*

Class | Method | HTTP request | Description
------------ | ------------- | ------------- | -------------
*AssignmentsApi* | [**CreateAssignment**](docs/AssignmentsApi.md#createassignment) | **Post** /v1/tags/{tagId}/assignments/{resourceType}/{resourceId} | Create a new assignment for the tag
*AssignmentsApi* | [**DeleteAssignment**](docs/AssignmentsApi.md#deleteassignment) | **Delete** /v1/tags/{tagId}/assignments/{resourceType}/{resourceId} | Delete existing tag assignment
*AssignmentsApi* | [**RetrieveAssignment**](docs/AssignmentsApi.md#retrieveassignment) | **Get** /v1/tags/{tagId}/assignments/{resourceType}/{resourceId} | Get specific assignment for the tag
*AssignmentsApi* | [**RetrieveAssignmentList**](docs/AssignmentsApi.md#retrieveassignmentlist) | **Get** /v1/tags/{tagId}/assignments | List tag assignments
*AssignmentsAuditsApi* | [**RetrieveAssignmentsAuditsList**](docs/AssignmentsAuditsApi.md#retrieveassignmentsauditslist) | **Get** /v1/tags/assignments/audits | List history about your assignments (audit)
*ComputeApi* | [**CreateCompute**](docs/ComputeApi.md#createcompute) | **Post** /v1/compute | Create a new compute
*ComputeApi* | [**DeleteCompute**](docs/ComputeApi.md#deletecompute) | **Delete** /v1/compute/computeId | Delete existing compute by id
*ComputeApi* | [**RetrieveCompute**](docs/ComputeApi.md#retrievecompute) | **Get** /v1/compute/{computeId} | Get specific compute by id
*ComputeApi* | [**RetrieveComputeList**](docs/ComputeApi.md#retrievecomputelist) | **Get** /v1/compute | List compute
*ComputeApi* | [**UpdateCompute**](docs/ComputeApi.md#updatecompute) | **Patch** /v1/compute/{computeId} | Update specific compute by id
*ComputeAuditsApi* | [**RetrieveComputeAuditsList**](docs/ComputeAuditsApi.md#retrievecomputeauditslist) | **Get** /v1/compute/audits | List history about your compute (audit)
*TagsApi* | [**CreateTag**](docs/TagsApi.md#createtag) | **Post** /v1/tags | Create a new tag
*TagsApi* | [**DeleteTag**](docs/TagsApi.md#deletetag) | **Delete** /v1/tags/{tagId} | Delete existing tag by id
*TagsApi* | [**RetrieveTag**](docs/TagsApi.md#retrievetag) | **Get** /v1/tags/{tagId} | Get specific tag by id
*TagsApi* | [**RetrieveTagList**](docs/TagsApi.md#retrievetaglist) | **Get** /v1/tags | List tags
*TagsApi* | [**UpdateTag**](docs/TagsApi.md#updatetag) | **Patch** /v1/tags/{tagId} | Update specific tag by id
*TagsAuditsApi* | [**RetrieveTagAuditsList**](docs/TagsAuditsApi.md#retrievetagauditslist) | **Get** /v1/tags/audits | List history about your tags (audit)


## Documentation For Models

 - [AssignmentAuditResponse](docs/AssignmentAuditResponse.md)
 - [AssignmentResponse](docs/AssignmentResponse.md)
 - [BaseRepresentation](docs/BaseRepresentation.md)
 - [ComputeAuditResponse](docs/ComputeAuditResponse.md)
 - [ComputeResponse](docs/ComputeResponse.md)
 - [CreateAssignmentResponse](docs/CreateAssignmentResponse.md)
 - [CreateComputeResponse](docs/CreateComputeResponse.md)
 - [CreateTagRequest](docs/CreateTagRequest.md)
 - [CreateTagResponse](docs/CreateTagResponse.md)
 - [FindComputeResponse](docs/FindComputeResponse.md)
 - [FindTagResponse](docs/FindTagResponse.md)
 - [Links](docs/Links.md)
 - [Pagination](docs/Pagination.md)
 - [PaginationMeta](docs/PaginationMeta.md)
 - [TagAuditResponse](docs/TagAuditResponse.md)
 - [TagResponse](docs/TagResponse.md)
 - [UpdateComputeResponse](docs/UpdateComputeResponse.md)
 - [UpdateTagRequest](docs/UpdateTagRequest.md)
 - [UpdateTagResponse](docs/UpdateTagResponse.md)


## Documentation For Authorization



### bearer

- **Type**: HTTP Bearer token authentication

Example

```golang
auth := context.WithValue(context.Background(), sw.ContextAccessToken, "BEARERTOKENSTRING")
r, err := client.Service.Operation(auth, args)
```


## Documentation for Utility Methods

Due to the fact that model structure members are all pointers, this package contains
a number of utility functions to easily obtain pointers to values of basic types.
Each of these functions takes a value of the given basic type and returns a pointer to it:

* `PtrBool`
* `PtrInt`
* `PtrInt32`
* `PtrInt64`
* `PtrFloat`
* `PtrFloat32`
* `PtrFloat64`
* `PtrString`
* `PtrTime`

## Author

support@contabo.com

